{% extends 'base.html' %}
{% load static %}
{% block title %}Order {{ order.order_number }}{% endblock %}
{% block page_bg_attr %}style="background-image: url('{% static 'images/home-bg.jpg' %}');"{% endblock %}
{% block page_wrap_class %}overlay{% endblock %}

{% block content %}
<div class="container" style="padding: 2rem 1.5rem;">
  <div class="form-box" style="max-width: 640px;">
    <h1>Order {{ order.order_number }}</h1>
    <p>Status: <strong>{{ order.status }}</strong> | Payment: {{ order.payment_status }}</p>
    <p>Placed on {{ order.created_at|date:"d M Y H:i" }}</p>
    {% if order.address %}
    <p>Delivery: {{ order.address.full_name }}, {{ order.address.address_line1 }}, {{ order.address.city }} - {{ order.address.pincode }}</p>
    {% endif %}
    <hr style="margin: 1rem 0;">
    <h2 style="font-size: 1.1rem;">Items</h2>
    <div class="order-items">
      {% for item in items %}
      <div class="order-item-row">
        {% if item.product.image %}
        <img src="{{ item.product.image.url }}" alt="{{ item.product.name }}" class="order-item-thumb">
        {% else %}
        <div class="order-item-thumb-placeholder"></div>
        {% endif %}
        <div>
          <div class="order-item-text-main">{{ item.product.name }} × {{ item.quantity }}</div>
          <div class="order-item-text-sub">₹{{ item.price }} each — ₹{{ item.total }} total</div>
        </div>
      </div>
      {% endfor %}
    </div>
    <hr style="margin: 1rem 0;">
    <p>Subtotal: ₹{{ order.subtotal }} | Discount: ₹{{ order.discount }} | <strong>Total: ₹{{ order.total }}</strong></p>
    <p style="margin-top: 1rem;"><a href="{% url 'userapp:orders' %}" class="btn btn-outline">Back to Orders</a></p>
  </div>
</div>
{% endblock %}

