{% extends 'adminapp/base_admin.html' %}
{% block title %}Order {{ order.order_number }}{% endblock %}
{% block content %}
<h1>Order {{ order.order_number }}</h1>
<p>User: {{ order.user.name }} ({{ order.user.email }})</p>
<p>Status: <strong>{{ order.status }}</strong> | Payment: {{ order.payment_status }}</p>
<p>Address: {{ order.address.full_name }}, {{ order.address.address_line1 }}, {{ order.address.city }} - {{ order.address.pincode }}</p>
<p>Subtotal: ₹{{ order.subtotal }} | Discount: ₹{{ order.discount }} | Total: ₹{{ order.total }}</p>
<form method="post" action="{% url 'adminapp:order_update_status' order.order_number %}" style="margin: 1rem 0;">
  {% csrf_token %}
  <label>Update status:</label>
  <select name="status"><option value="pending" {% if order.status == 'pending' %}selected{% endif %}>Pending</option><option value="confirmed" {% if order.status == 'confirmed' %}selected{% endif %}>Confirmed</option><option value="shipped" {% if order.status == 'shipped' %}selected{% endif %}>Shipped</option><option value="delivered" {% if order.status == 'delivered' %}selected{% endif %}>Delivered</option><option value="cancelled" {% if order.status == 'cancelled' %}selected{% endif %}>Cancelled</option></select>
  <button type="submit" class="btn btn-primary" style="margin-left: 0.5rem;">Update</button>
</form>
<h2>Items</h2>
<table>
  <thead><tr><th>Product</th><th>Qty</th><th>Price</th><th>Total</th></tr></thead>
  <tbody>
    {% for item in items %}
    <tr><td>{{ item.product.name }}</td><td>{{ item.quantity }}</td><td>₹{{ item.price }}</td><td>₹{{ item.total }}</td></tr>
    {% endfor %}
  </tbody>
</table>
<p style="margin-top: 1rem;"><a href="{% url 'adminapp:orders_list' %}" class="btn btn-outline">Back to Orders</a></p>
{% endblock %}
